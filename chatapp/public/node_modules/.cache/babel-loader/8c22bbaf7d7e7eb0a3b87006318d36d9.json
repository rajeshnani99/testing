{"ast":null,"code":"var _jsxFileName = \"/Users/rajesh/Desktop/Dev/chatapp/public/src/pages/Chats.jsx\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport { useState, useEffect, useRef } from 'react';\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { allUsersRoute, host } from \"../utils/APIRoutes\";\nimport Contacts from \"../components/Contacts\";\nimport Welcome from \"../components/Welcome\";\nimport ChatContainer from \"../components/ChatContainer\";\nimport GroupchatContainer from \"../components/GroupchatContainer\";\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chats() {\n  _s();\n\n  const socket = useRef();\n  const navigate = useNavigate();\n  const [contacts, setContacts] = useState([]);\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [currentChat, setCurrentChat] = useState(undefined);\n  const [isLoaded, setIsLoaded] = useState(false);\n  useEffect(() => {\n    const navigationTo = async () => {\n      if (!localStorage.getItem('chat-app-user')) {\n        navigate(\"/login\");\n      } else {\n        setCurrentUser(await JSON.parse(localStorage.getItem('chat-app-user')));\n        setIsLoaded(true);\n      }\n    };\n\n    navigationTo();\n  }, []);\n  useEffect(() => {\n    if (currentUser) {\n      socket.current = io(host);\n      socket.current.emit(\"add-user\", currentUser._id);\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    const getCurrentUser = async () => {\n      if (currentUser) {\n        if (currentUser.isAvatarImageSet) {\n          const data = await axios.get(`${allUsersRoute}/${currentUser._id}`);\n          setContacts(data.data);\n        } else {\n          navigate('/setAvatar');\n        }\n      }\n    };\n\n    getCurrentUser();\n  }, [currentUser]);\n\n  const handleChatChange = chat => {\n    setCurrentChat(chat);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Contacts, {\n        contacts: contacts,\n        currentUser: currentUser,\n        changeChat: handleChatChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), isLoaded && currentChat === undefined ? /*#__PURE__*/_jsxDEV(Welcome, {\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 12\n      }, this) : /*#__PURE__*/_jsxDEV(ChatContainer, {\n        currentChat: currentChat,\n        socket: socket,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chats, \"zNH6Rek1b8oo7/R7mxeuR01CHsw=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Chats;\nconst Container = styled.div`\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n`;\n_c2 = Container;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Chats\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"names":["styled","useState","useEffect","useRef","axios","useNavigate","allUsersRoute","host","Contacts","Welcome","ChatContainer","GroupchatContainer","io","Chats","socket","navigate","contacts","setContacts","currentUser","setCurrentUser","undefined","currentChat","setCurrentChat","isLoaded","setIsLoaded","navigationTo","localStorage","getItem","JSON","parse","current","emit","_id","getCurrentUser","isAvatarImageSet","data","get","handleChatChange","chat","Container","div"],"sources":["/Users/rajesh/Desktop/Dev/chatapp/public/src/pages/Chats.jsx"],"sourcesContent":["import styled from \"styled-components\"\nimport { useState, useEffect , useRef} from 'react'\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { allUsersRoute, host } from \"../utils/APIRoutes\";\nimport Contacts from \"../components/Contacts\";\nimport Welcome from \"../components/Welcome\";\nimport ChatContainer from \"../components/ChatContainer\";\nimport GroupchatContainer from \"../components/GroupchatContainer\"\nimport { io } from \"socket.io-client\";\n\n\nexport default function Chats() {\n  const socket = useRef();\n  const navigate = useNavigate();\n  const [contacts, setContacts] = useState([]);\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [currentChat, setCurrentChat] = useState(undefined);\n  const [isLoaded, setIsLoaded] = useState(false);\n  \n\n  useEffect( ()=>{\n    const navigationTo = async () => {\n      if (!localStorage.getItem('chat-app-user'))\n      {\n        navigate(\"/login\");\n      }\n      else {\n        setCurrentUser(await JSON.parse(localStorage.getItem('chat-app-user')));\n        setIsLoaded(true);\n      }\n    }\n    navigationTo();\n   }, []);\n\n   useEffect(()=>{\n    if(currentUser){\n      socket.current = io(host);\n      socket.current.emit(\"add-user\", currentUser._id);\n    }\n   },[currentUser]);\n\n  useEffect( () => {\n    const getCurrentUser = async()=>{\n      if( currentUser)  {\n      if(currentUser.isAvatarImageSet){\n        const data = await  axios.get(`${allUsersRoute}/${currentUser._id}`);\n        setContacts(data.data);\n      } else{\n        navigate('/setAvatar');\n      }\n    }\n    }\n      getCurrentUser();\n  }, [currentUser]);\n\n  const handleChatChange = (chat) =>{\n    setCurrentChat(chat);\n  }\n\n  return (\n    <Container>\n      <div className=\"container\">\n        <Contacts contacts={contacts} currentUser={currentUser}  changeChat={handleChatChange}/>\n        { isLoaded &&\n          currentChat === undefined ?\n           <Welcome currentUser={currentUser}/> : \n       \n          <ChatContainer currentChat={currentChat} socket={socket} currentUser={currentUser} />\n        \n         \n        }\n      </div>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/rajesh/Desktop/Dev/chatapp/public/src/pages/Chats.jsx\",\n    _s = $RefreshSig$();\n\n/** @format */\nimport styled from \"styled-components\";\nimport { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { allUsersRoute, host, allChats } from \"../utils/APIRoutes\";\nimport Contacts from \"../components/Contacts\";\nimport Welcome from \"../components/Welcome\";\nimport ChatContainer from \"../components/ChatContainer\";\nimport GroupchatContainer from \"../components/GroupchatContainer\";\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chats() {\n  _s();\n\n  const socket = useRef();\n  const navigate = useNavigate();\n  const [contacts, setContacts] = useState([]);\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [currentChat, setCurrentChat] = useState(undefined);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [groupChatName, setGroupChatName] = useState(undefined);\n  useEffect(() => {\n    const navigationTo = async () => {\n      if (!localStorage.getItem(\"chat-app-user\")) {\n        navigate(\"/login\");\n      } else {\n        setCurrentUser(await JSON.parse(localStorage.getItem(\"chat-app-user\")));\n        setIsLoaded(true);\n      }\n    };\n\n    navigationTo();\n  }, []);\n  useEffect(() => {\n    if (currentUser) {\n      socket.current = io(host);\n      socket.current.emit(\"add-user\", currentUser._id);\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    const getCurrentUser = async () => {\n      if (currentUser) {\n        if (currentUser.isAvatarImageSet) {\n          const data = await axios.get(`${allUsersRoute}/${currentUser._id}`);\n          setContacts(data.data);\n        } else {\n          navigate(\"/setAvatar\");\n        }\n      }\n    };\n\n    getCurrentUser();\n  }, [currentUser]); //getting all the group name\n\n  useEffect(() => {\n    const fetchChats = async () => {\n      const data = await axios.get(`${allChats}`);\n      setGroupChatName(data.data); //console.log(\"check the group data :\" + JSON.stringify(data.data));\n    };\n\n    fetchChats();\n  }, [groupChatName]); // console.log(groupChatName);\n\n  const handleChatChange = chat => {\n    setCurrentChat(chat);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Contacts, {\n        contacts: contacts,\n        currentUser: currentUser,\n        changeChat: handleChatChange,\n        groupChatName: groupChatName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 5\n      }, this), isLoaded && currentChat === undefined ? /*#__PURE__*/_jsxDEV(Welcome, {\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(ChatContainer, {\n        currentChat: currentChat,\n        socket: socket,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Chats, \"ND9BWtVPPVByYcnuwCmhfU2tWr8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Chats;\nconst Container = styled.div`\n\theight: 100vh;\n\twidth: 100vw;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tgap: 1rem;\n\talign-items: center;\n\tbackground-color: #131324;\n\t.container {\n\t\theight: 85vh;\n\t\twidth: 85vw;\n\t\tbackground-color: #00000076;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 25% 75%;\n\t\t@media screen and (min-width: 720px) and (max-width: 1080px) {\n\t\t\tgrid-template-columns: 35% 65%;\n\t\t}\n\t}\n`;\n_c2 = Container;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Chats\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"names":["styled","useState","useEffect","useRef","axios","useNavigate","allUsersRoute","host","allChats","Contacts","Welcome","ChatContainer","GroupchatContainer","io","Chats","socket","navigate","contacts","setContacts","currentUser","setCurrentUser","undefined","currentChat","setCurrentChat","isLoaded","setIsLoaded","groupChatName","setGroupChatName","navigationTo","localStorage","getItem","JSON","parse","current","emit","_id","getCurrentUser","isAvatarImageSet","data","get","fetchChats","handleChatChange","chat","Container","div"],"sources":["/Users/rajesh/Desktop/Dev/chatapp/public/src/pages/Chats.jsx"],"sourcesContent":["/** @format */\n\nimport styled from \"styled-components\";\nimport { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { allUsersRoute, host, allChats } from \"../utils/APIRoutes\";\nimport Contacts from \"../components/Contacts\";\nimport Welcome from \"../components/Welcome\";\nimport ChatContainer from \"../components/ChatContainer\";\nimport GroupchatContainer from \"../components/GroupchatContainer\";\nimport { io } from \"socket.io-client\";\n\nexport default function Chats() {\n\tconst socket = useRef();\n\tconst navigate = useNavigate();\n\tconst [contacts, setContacts] = useState([]);\n\tconst [currentUser, setCurrentUser] = useState(undefined);\n\tconst [currentChat, setCurrentChat] = useState(undefined);\n\tconst [isLoaded, setIsLoaded] = useState(false);\n\tconst [groupChatName, setGroupChatName] = useState(undefined);\n\n\tuseEffect(() => {\n\t\tconst navigationTo = async () => {\n\t\t\tif (!localStorage.getItem(\"chat-app-user\")) {\n\t\t\t\tnavigate(\"/login\");\n\t\t\t} else {\n\t\t\t\tsetCurrentUser(await JSON.parse(localStorage.getItem(\"chat-app-user\")));\n\t\t\t\tsetIsLoaded(true);\n\t\t\t}\n\t\t};\n\t\tnavigationTo();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (currentUser) {\n\t\t\tsocket.current = io(host);\n\t\t\tsocket.current.emit(\"add-user\", currentUser._id);\n\t\t}\n\t}, [currentUser]);\n\n\tuseEffect(() => {\n\t\tconst getCurrentUser = async () => {\n\t\t\tif (currentUser) {\n\t\t\t\tif (currentUser.isAvatarImageSet) {\n\t\t\t\t\tconst data = await axios.get(`${allUsersRoute}/${currentUser._id}`);\n\t\t\t\t\tsetContacts(data.data);\n\t\t\t\t} else {\n\t\t\t\t\tnavigate(\"/setAvatar\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tgetCurrentUser();\n\t}, [currentUser]);\n\n\t//getting all the group name\n\tuseEffect(() => {\n\t\tconst fetchChats = async () => {\n\t\t\tconst data = await axios.get(`${allChats}`);\n\n\t\t\tsetGroupChatName(data.data);\n\t\t\t//console.log(\"check the group data :\" + JSON.stringify(data.data));\n\t\t};\n\t\tfetchChats();\n\t}, [groupChatName]);\n\t// console.log(groupChatName);\n\n\tconst handleChatChange = (chat) => {\n\t\tsetCurrentChat(chat);\n\t};\n\n\treturn (\n\t\t<Container>\n\t\t\t<div className=\"container\">\n\t\t\t\t<Contacts\n\t\t\t\t\tcontacts={contacts}\n\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\tchangeChat={handleChatChange}\n\t\t\t\t\tgroupChatName={groupChatName}\n\t\t\t\t/>\n\n\t\t\t\t{isLoaded && currentChat === undefined ? (\n\t\t\t\t\t<Welcome currentUser={currentUser} />\n\t\t\t\t) : (\n\t\t\t\t\t<ChatContainer\n\t\t\t\t\t\tcurrentChat={currentChat}\n\t\t\t\t\t\tsocket={socket}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{/* {\n\t\t\t\t\t<GroupchatContainer\n\t\t\t\t\t\tcurrentChat={currentChat}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t} */}\n\t\t\t</div>\n\t\t</Container>\n\t);\n}\n\nconst Container = styled.div`\n\theight: 100vh;\n\twidth: 100vw;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tgap: 1rem;\n\talign-items: center;\n\tbackground-color: #131324;\n\t.container {\n\t\theight: 85vh;\n\t\twidth: 85vw;\n\t\tbackground-color: #00000076;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 25% 75%;\n\t\t@media screen and (min-width: 720px) and (max-width: 1080px) {\n\t\t\tgrid-template-columns: 35% 65%;\n\t\t}\n\t}\n`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}